(this["webpackJsonpcryptic-jpz"]=this["webpackJsonpcryptic-jpz"]||[]).push([[0],{44:function(e,t,n){"use strict";n.r(t);var c=n(33),r=n(11),a=n(3),l=n(12),u=n(9),o=n(43),i=n.n(o),s=(n(49),n(0)),b=n(51),d=n(52),j=n(53),f=n(66),p={value:"",leftWall:!1,topWall:!1},m=function(){var e=w(Array(80).fill(p)),t=y(e),n=function(e){var t=e.across,n=e.down,c=t.map((function(e){return{address:"".concat(e.number,"A"),clue:"",number:e.number,isAcross:!0}})),r=n.map((function(e){return{address:"".concat(e.number,"D"),clue:"",number:e.number,isAcross:!1}}));return d.concat(c,r)}(t),c=Object(u.useState)(e),o=Object(l.a)(c,2),i=o[0],b=o[1],m=Object(u.useState)(null),v=Object(l.a)(m,2),g=v[0],W=v[1],C=Object(u.useState)(t),D=Object(l.a)(C,2),z=D[0],S=D[1],B=Object(u.useState)(n),M=Object(l.a)(B,2),F=M[0],J=M[1],T=Object(u.useState)({title:"",creator:""}),E=Object(l.a)(T,2),L=E[0],P=E[1],R=function(e){W(null),P(Object(a.a)(Object(a.a)({},L),e))},U=function(){return F.map((function(e){return e.clue})).includes("")||i.map((function(e){return e.value})).includes("")||!(F.length===z.across.length+z.down.length)};return Object(s.jsxs)("div",{className:"main",children:[Object(s.jsxs)("div",{children:[Object(s.jsx)(O,{cells:i,active:g,onClick:function(e){return function(e){W(e)}(e)},onInput:function(e,t){return function(e,t,n){var c=n.slice();c[e]=Object(a.a)(Object(a.a)({},c[e]),{},{value:t.toUpperCase()}),b(w(c)),S(y(c)),1===t.length&&W(e+1)}(e,t,i)},w:8,h:10}),Object(s.jsx)("button",{onClick:function(){return function(e,t){var n=t.slice();n[e]=Object(a.a)(Object(a.a)({},n[e]),{},{leftWall:!n[e].leftWall}),b(w(n));var c=y(n);S(c),J(I(F,c))}(g,i)},disabled:g%8===0,children:"Toggle Left Wall"}),Object(s.jsx)("button",{onClick:function(){return function(e,t){var n=t.slice();n[e]=Object(a.a)(Object(a.a)({},n[e]),{},{topWall:!n[e].topWall}),b(w(n));var c=y(n);S(c),J(I(F,c))}(g,i)},disabled:!(g>=8),children:"Toggle Top Wall"})]}),Object(s.jsxs)("div",{children:[Object(s.jsx)(x,{onMetaInput:function(e){return R(e)}}),Object(s.jsx)(h,Object(a.a)(Object(a.a)({},z),{},{onClueInput:function(e){return function(e,t){W(null);var n=t.slice();d.remove(n,["address",e.address]),J([].concat(Object(r.a)(n),[e]))}(e,F)}})),Object(s.jsx)("a",{href:U()?"":"data:".concat("application/xml",";base64,",btoa(function(e,t,n,c){var r={"crossword-compiler-applet":{"rectangular-puzzle":{metadata:{title:f.encode(c.title,{decimal:!0}),creator:f.encode(c.creator,{decimal:!0})},crossword:{grid:k(e),word:A(t),clues:N(n)}}}};return j.create(r,{noDoubleEncoding:!0}).end()}(i,z,F,L))),download:"".concat(L.title,".jpz"),children:Object(s.jsx)("button",{disabled:U(),children:"Download JPZ"})})]})]})},O=function(e){var t=d.chunk(e.cells,e.w);return Object(s.jsx)("div",{className:"grid",children:t.map((function(t,n){return Object(s.jsx)("div",{className:"row",children:t.map((function(t,c){var r=8*n+c;return Object(s.jsx)(v,Object(a.a)({active:e.active===r,onClick:function(){return e.onClick(r)},onFocus:function(){return e.onClick(r)},onInput:function(t){return e.onInput(r,t)}},t),r)}))})}))})},v=function(e){var t=C(),n=Object(l.a)(t,2),c=n[0],r=n[1];return e.active&&r(),Object(s.jsxs)("div",{className:b("cell",e.active?"active":null,e.leftWall?"leftWall":null,e.topWall?"topWall":null),onClick:function(){e.onClick(),r()},children:[Object(s.jsx)("div",{className:b("number"),children:e.number}),Object(s.jsx)("input",{className:b("value"),type:"text",maxLength:"1",onInput:function(t){return e.onInput(t.target.value)},onFocus:e.onFocus,ref:c})]})},h=function(e){return Object(s.jsxs)("div",{children:[Object(s.jsxs)("div",{children:[Object(s.jsx)("h3",{children:"Across"}),e.across.map((function(t){return Object(s.jsx)(g,Object(a.a)(Object(a.a)({},t),{},{onClueInput:function(n){return e.onClueInput({clue:n,address:"".concat(t.number,"A"),number:t.number,isAcross:!0})}}))}))]}),Object(s.jsxs)("div",{children:[Object(s.jsx)("h3",{children:"Down"}),e.down.map((function(t){return Object(s.jsx)(g,Object(a.a)(Object(a.a)({},t),{},{onClueInput:function(n){return e.onClueInput({clue:n,address:"".concat(t.number,"D"),number:t.number,isAcross:!1})}}))}))]}),Object(s.jsx)("div",{children:Object(s.jsxs)("i",{children:[e.across.length+e.down.length," words"]})})]})},x=function(e){return Object(s.jsxs)("div",{children:[Object(s.jsx)("div",{className:"title",children:Object(s.jsx)("input",{type:"text",placeholder:"title",onInput:function(t){return e.onMetaInput({title:t.target.value})}})}),Object(s.jsx)("div",{className:"creator",children:Object(s.jsx)("input",{type:"text",placeholder:"Creator",onInput:function(t){return e.onMetaInput({creator:t.target.value})}})})]})},g=function(e){return Object(s.jsxs)("div",{className:"wordItem",children:[Object(s.jsx)("div",{className:"number",children:e.number}),Object(s.jsx)("div",{className:"word",children:e.word}),Object(s.jsx)("div",{className:"clue",children:Object(s.jsx)("input",{type:"text",placeholder:"Clue here",onInput:function(t){return e.onClueInput(t.target.value)}})})]})};function w(e){for(var t=1,n=0;n<e.length;n++){var c=e[n];c.index=n,c.x=n%8+1,c.y=Math.floor(n/8)+1;var r=n<8?null:e[n-8],l=n>79?null:e[n+8],u=n%8===0?null:e[n-1],o=n%8===7?null:e[n+1];c.topWall&&l&&!l.topWall||!r&&!l.topWall||c.leftWall&&o&&!o.leftWall||!u&&!o.leftWall?(e[n]=Object(a.a)(Object(a.a)({},e[n]),{},{number:t}),t++):e[n]=Object(a.a)(Object(a.a)({},e[n]),{},{number:void 0})}return e}function y(e){var t,n=[],a=[],l=d.chunk(e,8),u=d.zip.apply(d,Object(r.a)(l)),o=Object(c.a)(l);try{for(o.s();!(t=o.n()).done;){for(var i=t.value,s=[],b=0;b<i.length;b++){var j=i[b];if(j.leftWall||0===b){var f=[];f.push.apply(f,[j].concat(Object(r.a)(d.takeWhile(i.slice(b+1),["leftWall",!1])))),s.push(f)}}n.push.apply(n,s)}}catch(w){o.e(w)}finally{o.f()}var p,m=Object(c.a)(u);try{for(m.s();!(p=m.n()).done;){for(var O=p.value,v=[],h=0;h<O.length;h++){var x=O[h];if(x.topWall||0===h){var g=[];g.push.apply(g,[x].concat(Object(r.a)(d.takeWhile(O.slice(h+1),["topWall",!1])))),v.push(g)}}a.push.apply(a,v)}}catch(w){m.e(w)}finally{m.f()}return{across:n.filter((function(e){return e.length>1})).map((function(e){return W(e)})),down:d.sortBy(a.filter((function(e){return e.length>1})).map((function(e){return W(e)})),["number"])}}function W(e){return{number:e[0].number||"-",word:e.map((function(e){return e.value?e.value:"_"})).join(""),cells:e.map((function(e){return{x:e.x,y:e.y}}))}}function I(e,t){var n=t.across,c=t.down,r=d.concat(n.map((function(e){return"".concat(e.number,"A")})),c.map((function(e){return"".concat(e.number,"D")})));return e.filter((function(e){var t=e.address;return r.includes(t)}))}var C=function(){var e=Object(u.useRef)(null);return[e,function(){e.current&&e.current.focus()}]};function k(e){return{"@height":"".concat(10),"@width":"".concat(8),"@one-letter-words":"false","grid-look":{"@numbering-scheme":"normal","@thick-border":"true"},cell:e.map((function(e,t){return{"@x":"".concat(e.x),"@y":"".concat(e.y),"@solution":e.value,"@number":e.number,"@left-bar":e.leftWall?"true":void 0,"@top-bar":e.topWall?"true":void 0}}))}}function A(e){return[].concat(Object(r.a)(e.across),Object(r.a)(e.down)).map((function(e,t){return{"@id":"".concat(t+1),cells:e.cells.map((function(e){return{"@x":"".concat(e.x),"@y":"".concat(e.y)}}))}}))}function N(e){var t=d.sortBy(d.filter(e,"isAcross"),"number"),n=d.sortBy(d.filter(e,["isAcross",!1]),"number");return[{title:{b:"Across"},clue:t.map((function(e,t){return{"@number":"".concat(e.number),"@word":"".concat(t+1),span:f.encode(e.clue,{decimal:!0})}}))},{title:{b:"Down"},clue:n.map((function(e,n){return{"@number":"".concat(e.number),"@word":"".concat(n+t.length+1),span:f.encode(e.clue,{decimal:!0})}}))}]}i.a.render(Object(s.jsx)(m,{}),document.getElementById("root"))},49:function(e,t,n){}},[[44,1,2]]]);
//# sourceMappingURL=main.7d8b8030.chunk.js.map