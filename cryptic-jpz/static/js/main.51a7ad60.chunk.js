(this["webpackJsonpcryptic-jpz"]=this["webpackJsonpcryptic-jpz"]||[]).push([[0],{46:function(e,t,n){"use strict";n.r(t);var c=n(33),r=n(11),a=n(3),l=n(12),o=(n(47),n(48),n(9)),s=n(45),u=n.n(s),i=(n(68),n(0)),b=n(70),d=n(71),j=n(72),f=n(80),m={value:"",leftWall:!1,topWall:!1},p=function(){var e=w(Array(80).fill(m)),t=N(e),n=function(e){var t=e.across,n=e.down,c=t.map((function(e){return{address:"".concat(e.number,"A"),clue:"",number:e.number,isAcross:!0}})),r=n.map((function(e){return{address:"".concat(e.number,"D"),clue:"",number:e.number,isAcross:!1}}));return d.concat(c,r)}(t),c=Object(o.useState)(e),s=Object(l.a)(c,2),u=s[0],p=s[1],v=Object(o.useState)(null),g=Object(l.a)(v,2),W=g[0],I=g[1],z=Object(o.useState)(t),S=Object(l.a)(z,2),F=S[0],J=S[1],T=Object(o.useState)(n),B=Object(l.a)(T,2),M=B[0],L=B[1],P=Object(o.useState)({title:"",creator:""}),Z=Object(l.a)(P,2),E=Z[0],q=Z[1],G=function(e){I(null),q(Object(a.a)(Object(a.a)({},E),e))},H=function(){return M.map((function(e){return e.clue})).includes("")||u.map((function(e){return e.value})).includes("")||!(M.length===F.across.length+F.down.length)};return Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)("div",{className:b("container-fluid"),children:Object(i.jsxs)("div",{className:b("row"),children:[Object(i.jsx)("div",{className:b("col-5"),children:Object(i.jsx)("div",{className:b("d-flex","justify-content-center","sticky-top"),children:Object(i.jsxs)("div",{className:b("py-4"),children:[Object(i.jsx)(h,{cells:u,active:W,onClick:function(e){return function(e){I(e)}(e)},onInput:function(e,t){return function(e,t,n){var c=n.slice();c[e]=Object(a.a)(Object(a.a)({},c[e]),{},{value:t.toUpperCase()}),p(w(c)),J(N(c)),1===t.length&&I(e+1)}(e,t,u)},w:8,h:10}),Object(i.jsxs)("div",{className:b("mt-3"),children:[Object(i.jsx)("button",{onClick:function(){return function(e,t){var n=t.slice();n[e]=Object(a.a)(Object(a.a)({},n[e]),{},{leftWall:!n[e].leftWall}),p(w(n));var c=N(n);J(c),L(C(M,c))}(W,u)},disabled:W%8===0,type:"button",className:b("btn","btn-secondary","me-2"),children:"Toggle Left Wall"}),Object(i.jsx)("button",{onClick:function(){return function(e,t){var n=t.slice();n[e]=Object(a.a)(Object(a.a)({},n[e]),{},{topWall:!n[e].topWall}),p(w(n));var c=N(n);J(c),L(C(M,c))}(W,u)},disabled:!(W>=8),type:"button",className:b("btn","btn-secondary"),children:"Toggle Top Wall"})]})]})})}),Object(i.jsxs)("div",{className:b("col-7","row","gy-4","mb-5"),children:[Object(i.jsx)(y,{onMetaInput:function(e){return G(e)}}),Object(i.jsx)(x,Object(a.a)(Object(a.a)({},F),{},{onClueInput:function(e){return function(e,t){I(null);var n=t.slice();d.remove(n,["address",e.address]),L([].concat(Object(r.a)(n),[e]))}(e,M)}})),Object(i.jsx)("a",{className:"d-grid",href:H()?void 0:"data:".concat("application/xml",";base64,",btoa(function(e,t,n,c){var r={"crossword-compiler-applet":{"rectangular-puzzle":{metadata:{title:f.encode(c.title,{decimal:!0}),creator:f.encode(c.creator,{decimal:!0})},crossword:{grid:k(e),word:A(t),clues:D(n)}}}};return j.create(r,{noDoubleEncoding:!0}).end()}(u,F,M,E))),download:"".concat(E.title,".jpz"),children:Object(i.jsx)("button",{disabled:H(),className:b("btn","btn-lg","btn-primary"),children:"Download JPZ"})})]})]})}),Object(i.jsx)(O,{})]})},O=function(){return Object(i.jsx)("div",{className:b("offcanvas","offcanvas-bottom","show"),tabIndex:"-1",id:"offcanvas","data-bs-backdrop":"true","data-bs-scroll":"true",children:Object(i.jsxs)("div",{className:b("p-3"),children:[Object(i.jsxs)("div",{className:"offcanvas-header",children:[Object(i.jsx)("h3",{className:"offcanvas-title",id:"offcanvasLabel",children:"TNY-Style Cryptic Crossword JPZ Generator"}),Object(i.jsx)("button",{type:"button",className:"btn-close text-reset","data-bs-dismiss":"offcanvas","aria-label":"Close"})]}),Object(i.jsxs)("div",{className:"offcanvas-body",children:[Object(i.jsx)("p",{children:Object(i.jsx)("b",{children:"How to use:"})}),Object(i.jsxs)("ol",{children:[Object(i.jsx)("li",{children:"Add letters and walls to the grid."}),Object(i.jsx)("li",{children:"Add a clue for each word. (Don\u2019t forget to use smart quotes and include enumerations!)"}),Object(i.jsx)("li",{children:"Download your JPZ file!"})]})]})]})})},h=function(e){var t=d.chunk(e.cells,e.w);return Object(i.jsx)("div",{className:"grid",children:t.map((function(t,n){return Object(i.jsx)("div",{className:"grid-row",children:t.map((function(t,c){var r=8*n+c;return Object(i.jsx)(v,Object(a.a)({active:e.active===r,onClick:function(){return e.onClick(r)},onFocus:function(){return e.onClick(r)},onInput:function(t){return e.onInput(r,t)}},t),r)}))})}))})},v=function(e){var t=I(),n=Object(l.a)(t,2),c=n[0],r=n[1];return e.active&&r(),Object(i.jsxs)("div",{className:b("cell",e.active?"active":null,e.leftWall?"leftWall":null,e.topWall?"topWall":null),onClick:function(){e.onClick(),r()},children:[Object(i.jsx)("div",{className:b("number"),children:e.number}),Object(i.jsx)("input",{className:b("value"),type:"text",maxLength:"1",onInput:function(t){return e.onInput(t.target.value)},onFocus:e.onFocus,ref:c})]})},x=function(e){return Object(i.jsxs)("div",{className:b(),children:[Object(i.jsxs)("div",{className:b("mb-4"),children:[Object(i.jsx)("h3",{className:b("mb-3"),children:"Across"}),e.across.map((function(t){return Object(i.jsx)(g,Object(a.a)(Object(a.a)({},t),{},{onClueInput:function(n){return e.onClueInput({clue:n,address:"".concat(t.number,"A"),number:t.number,isAcross:!0})}}))}))]}),Object(i.jsxs)("div",{className:b("mb-4"),children:[Object(i.jsx)("h3",{className:b("mb-3"),children:"Down"}),e.down.map((function(t){return Object(i.jsx)(g,Object(a.a)(Object(a.a)({},t),{},{onClueInput:function(n){return e.onClueInput({clue:n,address:"".concat(t.number,"D"),number:t.number,isAcross:!1})}}))}))]}),Object(i.jsx)("div",{children:Object(i.jsxs)("i",{children:[e.across.length+e.down.length," words"]})})]})},y=function(e){return Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)("div",{className:b("row","mb-2"),children:Object(i.jsx)("div",{className:b("col-6"),children:Object(i.jsx)("input",{type:"text",placeholder:"Title",className:b("form-control","form-control-lg"),onInput:function(t){return e.onMetaInput({title:t.target.value})}})})}),Object(i.jsx)("div",{className:b("row"),children:Object(i.jsx)("div",{className:b("col-4"),children:Object(i.jsx)("input",{type:"text",placeholder:"Creator",className:b("form-control"),onInput:function(t){return e.onMetaInput({creator:t.target.value})}})})})]})},g=function(e){return Object(i.jsxs)("div",{className:b("row","mb-1"),children:[Object(i.jsx)("div",{className:b("wi-number"),children:e.number}),Object(i.jsx)("div",{className:b("col"),children:e.word}),Object(i.jsx)("div",{className:b("col-9"),children:Object(i.jsx)("input",{type:"text",placeholder:"Clue (".concat(e.word.length,")"),className:b("form-control"),onInput:function(t){return e.onClueInput(t.target.value)}})})]})};function w(e){for(var t=1,n=0;n<e.length;n++){var c=e[n];c.index=n,c.x=n%8+1,c.y=Math.floor(n/8)+1;var r=n<8?null:e[n-8],l=n>79?null:e[n+8],o=n%8===0?null:e[n-1],s=n%8===7?null:e[n+1];c.topWall&&l&&!l.topWall||!r&&!l.topWall||c.leftWall&&s&&!s.leftWall||!o&&!s.leftWall?(e[n]=Object(a.a)(Object(a.a)({},e[n]),{},{number:t}),t++):e[n]=Object(a.a)(Object(a.a)({},e[n]),{},{number:void 0})}return e}function N(e){var t,n=[],a=[],l=d.chunk(e,8),o=d.zip.apply(d,Object(r.a)(l)),s=Object(c.a)(l);try{for(s.s();!(t=s.n()).done;){for(var u=t.value,i=[],b=0;b<u.length;b++){var j=u[b];if(j.leftWall||0===b){var f=[];f.push.apply(f,[j].concat(Object(r.a)(d.takeWhile(u.slice(b+1),["leftWall",!1])))),i.push(f)}}n.push.apply(n,i)}}catch(g){s.e(g)}finally{s.f()}var m,p=Object(c.a)(o);try{for(p.s();!(m=p.n()).done;){for(var O=m.value,h=[],v=0;v<O.length;v++){var x=O[v];if(x.topWall||0===v){var y=[];y.push.apply(y,[x].concat(Object(r.a)(d.takeWhile(O.slice(v+1),["topWall",!1])))),h.push(y)}}a.push.apply(a,h)}}catch(g){p.e(g)}finally{p.f()}return{across:n.filter((function(e){return e.length>1})).map((function(e){return W(e)})),down:d.sortBy(a.filter((function(e){return e.length>1})).map((function(e){return W(e)})),["number"])}}function W(e){return{number:e[0].number||"-",word:e.map((function(e){return e.value?e.value:"_"})).join(""),cells:e.map((function(e){return{x:e.x,y:e.y}}))}}function C(e,t){var n=t.across,c=t.down,r=d.concat(n.map((function(e){return"".concat(e.number,"A")})),c.map((function(e){return"".concat(e.number,"D")})));return e.filter((function(e){var t=e.address;return r.includes(t)}))}var I=function(){var e=Object(o.useRef)(null);return[e,function(){e.current&&e.current.focus()}]};function k(e){return{"@height":"".concat(10),"@width":"".concat(8),"@one-letter-words":"false","grid-look":{"@numbering-scheme":"normal","@thick-border":"true"},cell:e.map((function(e,t){return{"@x":"".concat(e.x),"@y":"".concat(e.y),"@solution":e.value,"@number":e.number,"@left-bar":e.leftWall?"true":void 0,"@top-bar":e.topWall?"true":void 0}}))}}function A(e){return[].concat(Object(r.a)(e.across),Object(r.a)(e.down)).map((function(e,t){return{"@id":"".concat(t+1),cells:e.cells.map((function(e){return{"@x":"".concat(e.x),"@y":"".concat(e.y)}}))}}))}function D(e){var t=d.sortBy(d.filter(e,"isAcross"),"number"),n=d.sortBy(d.filter(e,["isAcross",!1]),"number");return[{title:{b:"Across"},clue:t.map((function(e,t){return{"@number":"".concat(e.number),"@word":"".concat(t+1),span:f.encode(e.clue,{decimal:!0})}}))},{title:{b:"Down"},clue:n.map((function(e,n){return{"@number":"".concat(e.number),"@word":"".concat(n+t.length+1),span:f.encode(e.clue,{decimal:!0})}}))}]}u.a.render(Object(i.jsx)(p,{}),document.getElementById("root"))},68:function(e,t,n){}},[[46,1,2]]]);
//# sourceMappingURL=main.51a7ad60.chunk.js.map